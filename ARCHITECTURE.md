# KinkyBrizzle Architecture Overview

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React + Vite)                     â”‚
â”‚                         Port 5173 (dev) / Static (prod)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Components:                                                         â”‚
â”‚  - ChatBot (AI Agent Interface) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  - ProductCard                                      â”‚               â”‚
â”‚  - ShoppingCart                                     â”‚               â”‚
â”‚  - AdminDashboard                                   â”‚               â”‚
â”‚  - PublicShop                                       â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                          â”‚
                           â”‚ HTTP/REST API            â”‚ WebSocket (future)
                           â”‚                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND API (Express + TypeScript)                â”‚
â”‚                           Port 3001                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Routes:                         Services:                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ /api/products       â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Printful Service    â”‚            â”‚
â”‚  â”‚ /api/orders         â”‚        â”‚ - Create products   â”‚            â”‚
â”‚  â”‚ /api/cart           â”‚        â”‚ - Manage variants   â”‚            â”‚
â”‚  â”‚ /api/designs        â”‚        â”‚ - Fulfill orders    â”‚            â”‚
â”‚  â”‚ /api/ai/chat  â—€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”‚ /api/printful       â”‚    â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                              â”œâ”€â”€â–¶â”‚ Image Generator     â”‚            â”‚
â”‚  AI Agent Core:              â”‚   â”‚ - DALL-E / Imagen   â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚ - Logo design       â”‚            â”‚
â”‚  â”‚ Gemini 2.5 Flash    â”‚    â”‚   â”‚ - Clothing designs  â”‚            â”‚
â”‚  â”‚ Function Calling:   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”‚ â€¢ get_products      â”‚    â”‚                                      â”‚
â”‚  â”‚ â€¢ create_product    â”‚â”€â”€â”€â”€â”¤   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ â€¢ generate_design   â”‚â”€â”€â”€â”€â”¼â”€â”€â–¶â”‚ Rube.app Workflows  â”‚            â”‚
â”‚  â”‚ â€¢ update_orders     â”‚    â”‚   â”‚ - Social media      â”‚            â”‚
â”‚  â”‚ â€¢ search_web        â”‚    â”‚   â”‚ - Email automation  â”‚            â”‚
â”‚  â”‚ â€¢ execute_workflow  â”‚â”€â”€â”€â”€â”˜   â”‚ - Etsy/Shopify sync â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ PostgreSQL Connection
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPABASE (PostgreSQL Database)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Tables:                           Features:                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ products        â”‚              â”‚ Row Level       â”‚              â”‚
â”‚  â”‚ orders          â”‚              â”‚ Security (RLS)  â”‚              â”‚
â”‚  â”‚ cart_items      â”‚              â”‚                 â”‚              â”‚
â”‚  â”‚ design_requests â”‚              â”‚ Auto Timestamps â”‚              â”‚
â”‚  â”‚ chat_history    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚              â”‚
â”‚  â”‚ ai_actions      â”‚   (Persistentâ”‚ UUID Keys       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    Memory)   â”‚                 â”‚              â”‚
â”‚                                    â”‚ JSON Fields     â”‚              â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Examples

### 1. AI Creates a Product

```
User: "Create a t-shirt with a cool space design"
  â”‚
  â”œâ”€â–¶ ChatBot Component
  â”‚     â”‚
  â”‚     â””â”€â–¶ POST /api/ai/chat
  â”‚           â”‚
  â”‚           â”œâ”€â–¶ Gemini AI analyzes request
  â”‚           â”‚
  â”‚           â”œâ”€â–¶ Function Call: create_product
  â”‚           â”‚     â”‚
  â”‚           â”‚     â”œâ”€â–¶ Image Generator (DALL-E)
  â”‚           â”‚     â”‚   â””â”€â–¶ Returns: design_url
  â”‚           â”‚     â”‚
  â”‚           â”‚     â”œâ”€â–¶ Printful Service
  â”‚           â”‚     â”‚   â””â”€â–¶ Creates product with design
  â”‚           â”‚     â”‚
  â”‚           â”‚     â””â”€â–¶ Supabase: INSERT INTO products
  â”‚           â”‚
  â”‚           â””â”€â–¶ Returns: "Created space t-shirt!"
  â”‚
  â””â”€â–¶ Display: Product created successfully
```

### 2. User Adds to Cart

```
User: Clicks "Add to Cart" on product
  â”‚
  â”œâ”€â–¶ ProductCard Component
  â”‚     â”‚
  â”‚     â””â”€â–¶ POST /api/cart
  â”‚           â”‚
  â”‚           â””â”€â–¶ Supabase: INSERT INTO cart_items
  â”‚                 â”‚
  â”‚                 â””â”€â–¶ Returns: Updated cart
  â”‚
  â””â”€â–¶ Cart counter updates
```

### 3. AI Processes Order

```
User: "Show me pending orders"
  â”‚
  â”œâ”€â–¶ ChatBot Component
  â”‚     â”‚
  â”‚     â””â”€â–¶ POST /api/ai/chat
  â”‚           â”‚
  â”‚           â”œâ”€â–¶ Gemini AI function: get_orders
  â”‚           â”‚     â”‚
  â”‚           â”‚     â””â”€â–¶ Supabase: SELECT * FROM orders
  â”‚           â”‚           WHERE status = 'Pending'
  â”‚           â”‚
  â”‚           â””â”€â–¶ Returns: "You have 3 pending orders..."
  â”‚
  â””â”€â–¶ Display: Order list with details
```

### 4. Autonomous Workflow

```
AI: Detects new product created
  â”‚
  â”œâ”€â–¶ Function: execute_workflow
  â”‚     â”‚
  â”‚     â”œâ”€â–¶ Rube.app: social_media_post
  â”‚     â”‚   â””â”€â–¶ Posts to Instagram/Twitter
  â”‚     â”‚
  â”‚     â”œâ”€â–¶ Rube.app: etsy_sync
  â”‚     â”‚   â””â”€â–¶ Creates Etsy listing
  â”‚     â”‚
  â”‚     â””â”€â–¶ Supabase: INSERT INTO ai_actions
  â”‚           (logs all actions)
  â”‚
  â””â”€â–¶ User notified: "Posted to social media!"
```

## Technology Stack Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DEPLOYMENT                            â”‚
â”‚                    Railway.app (PaaS)                        â”‚
â”‚  â€¢ Auto-scaling                                              â”‚
â”‚  â€¢ CI/CD from GitHub                                         â”‚
â”‚  â€¢ Environment variables                                     â”‚
â”‚  â€¢ Health monitoring                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Hosts
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APPLICATION LAYER                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   FRONTEND          â”‚          BACKEND                      â”‚
â”‚   React 19          â”‚          Node.js 18+                  â”‚
â”‚   TypeScript        â”‚          Express.js                   â”‚
â”‚   Vite              â”‚          TypeScript                   â”‚
â”‚   TailwindCSS       â”‚          Axios                        â”‚
â”‚   React Router      â”‚          dotenv                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Connects to
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   EXTERNAL SERVICES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Google Gemini   â”‚   Supabase       â”‚   Printful          â”‚
â”‚  2.5 Flash       â”‚   PostgreSQL     â”‚   API               â”‚
â”‚  â€¢ AI Agent      â”‚   â€¢ Database     â”‚   â€¢ Products        â”‚
â”‚  â€¢ Function Call â”‚   â€¢ Auth         â”‚   â€¢ Fulfillment     â”‚
â”‚  â€¢ Multimodal    â”‚   â€¢ Storage      â”‚   â€¢ Mockups         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  OpenAI          â”‚   Rube.app       â”‚   Google Search     â”‚
â”‚  DALL-E 3        â”‚   Workflows      â”‚   API (Future)      â”‚
â”‚  â€¢ Image Gen     â”‚   â€¢ Automation   â”‚   â€¢ Web Search      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Flow

```
Developer's Machine
        â”‚
        â”‚ git push origin main
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Repo    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Webhook
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Railway        â”‚â”€â”€â”€â”€â”€â–¶â”‚  Build Process   â”‚
â”‚  Platform       â”‚      â”‚  â€¢ npm install   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â€¢ npm build     â”‚
         â”‚               â”‚  â€¢ Compile TS    â”‚
         â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Production     â”‚
â”‚  Environment    â”‚
â”‚  â€¢ Frontend     â”‚â”€â”€â”€â”€â”€â–¶ Static Files (CDN)
â”‚  â€¢ Backend API  â”‚â”€â”€â”€â”€â”€â–¶ Node.js Server
â”‚  â€¢ Health Check â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Runtime Connections
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â–¶ Supabase Database
         â”œâ”€â”€â”€â”€â”€â”€â–¶ Gemini API
         â”œâ”€â”€â”€â”€â”€â”€â–¶ Printful API
         â””â”€â”€â”€â”€â”€â”€â–¶ Other Services
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Security Layers                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. Environment Variables (Railway Secrets)                 â”‚
â”‚     â€¢ GEMINI_API_KEY                                        â”‚
â”‚     â€¢ SUPABASE_SERVICE_ROLE_KEY                             â”‚
â”‚     â€¢ PRINTFUL_API_KEY                                      â”‚
â”‚     â€¢ Never committed to Git                                â”‚
â”‚                                                              â”‚
â”‚  2. Supabase Row Level Security (RLS)                       â”‚
â”‚     â€¢ Public read access (products)                         â”‚
â”‚     â€¢ Authenticated writes                                  â”‚
â”‚     â€¢ Service role for AI agent                             â”‚
â”‚                                                              â”‚
â”‚  3. CORS Configuration                                      â”‚
â”‚     â€¢ Allowed origins only                                  â”‚
â”‚     â€¢ Credential handling                                   â”‚
â”‚                                                              â”‚
â”‚  4. API Rate Limiting (Future)                              â”‚
â”‚     â€¢ Per-session limits                                    â”‚
â”‚     â€¢ AI usage quotas                                       â”‚
â”‚                                                              â”‚
â”‚  5. Input Validation                                        â”‚
â”‚     â€¢ TypeScript type checking                              â”‚
â”‚     â€¢ Request validation                                    â”‚
â”‚     â€¢ SQL injection prevention (Supabase)                   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## AI Agent Decision Tree

```
User Message
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gemini Analyzes â”‚
â”‚ User Intent     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Needs  â”‚
    â”‚ Action?â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚
   Yes â”€â”¼â”€ No â”€â”€â–¶ Generate text response
        â”‚
        â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ Determine    â”‚
 â”‚ Function(s)  â”‚
 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â–¶ get_products â”€â”€â”€â”€â”€â”€â–¶ Query DB
        â”‚
        â”œâ”€â–¶ create_product â”€â”€â”€â”€â–¶ Generate Design
        â”‚                       â”œâ”€â–¶ Create in Printful
        â”‚                       â””â”€â–¶ Save to DB
        â”‚
        â”œâ”€â–¶ generate_design â”€â”€â”€â–¶ Call DALL-E
        â”‚
        â”œâ”€â–¶ update_order â”€â”€â”€â”€â”€â”€â–¶ Update DB
        â”‚
        â”œâ”€â–¶ search_web â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Search API
        â”‚
        â””â”€â–¶ execute_workflow â”€â”€â–¶ Rube.app
                                 â”œâ”€â–¶ Social post
                                 â”œâ”€â–¶ Email
                                 â””â”€â–¶ Sync platforms
        â”‚
        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Execute     â”‚
  â”‚ Function(s) â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Log Action  â”‚
  â”‚ to DB       â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Return      â”‚
  â”‚ Result to   â”‚
  â”‚ Gemini      â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Generate    â”‚
  â”‚ Natural     â”‚
  â”‚ Response    â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  Return to User
```

## Scaling Considerations

### Current Architecture (Railway)
- Single instance deployment
- Stateless API (scales horizontally)
- Database connection pooling via Supabase
- Railway auto-scaling based on load

### Future Enhancements
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load Balancer (Railway)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼             â–¼          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”
   â”‚ API  â”‚      â”‚ API  â”‚   â”‚ API  â”‚
   â”‚ Node â”‚      â”‚ Node â”‚   â”‚ Node â”‚
   â””â”€â”€â”¬â”€â”€â”€â”˜      â””â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”¬â”€â”€â”€â”˜
      â”‚             â”‚           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  Supabase  â”‚
              â”‚  (Pooled)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Start Command Reference

```bash
# Development
npm run dev              # Both frontend & backend
npm run dev:frontend     # Just frontend (Vite)
npm run dev:backend      # Just backend (Express)

# Production Build
npm run build            # Build both
npm run build:frontend   # Build React app
npm run build:backend    # Compile TypeScript

# Production Start
npm start                # Start compiled backend

# Testing
./test-setup.sh          # Validate project structure
./build.sh               # Full build process

# Deployment
railway login            # Authenticate
railway init             # Link project
railway up               # Deploy
```

---

Built for autonomous AI-powered e-commerce ğŸš€
